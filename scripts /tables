-- USERS TABLE
CREATE TABLE users (
    user_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    full_name VARCHAR2(100) NOT NULL,
    email VARCHAR2(100) UNIQUE NOT NULL,
    role VARCHAR2(30) CHECK (role IN ('ADMIN', 'COLLECTOR', 'RECYCLER')),
    created_at DATE DEFAULT SYSDATE
);

-- EWASTE ITEMS
CREATE TABLE ewaste_items (
    item_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    item_name VARCHAR2(100) NOT NULL,
    category VARCHAR2(50),
    condition_status VARCHAR2(30),
    created_at DATE DEFAULT SYSDATE
);

-- COLLECTION RECORDS
CREATE TABLE collection_records (
    collection_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id NUMBER NOT NULL,
    item_id NUMBER NOT NULL,
    collection_date DATE DEFAULT SYSDATE,
    location VARCHAR2(100),

    CONSTRAINT fk_user FOREIGN KEY (user_id)
        REFERENCES users(user_id),

    CONSTRAINT fk_item FOREIGN KEY (item_id)
        REFERENCES ewaste_items(item_id)
);

-- AUDIT LOG
CREATE TABLE audit_log (
    audit_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    table_name VARCHAR2(50),
    operation VARCHAR2(20),
    user_name VARCHAR2(50),
    action_date DATE DEFAULT SYSDATE,
    details VARCHAR2(200)
);
